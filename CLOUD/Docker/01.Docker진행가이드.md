# ğŸ³ Docker ì§„í–‰ ê°€ì´ë“œ 

---

## 1. Docker ë¡œì»¬ ì—”ì§„ ì„¤ì •

### 1.1 í™˜ê²½ë³€ìˆ˜ ì„¤ì •
- `DOCKER_HOME` : `C:\DEV\CLOUD\Docker\20.10.10`
- `DOCKER_HOME` ì„ `PATH` ë³€ìˆ˜ì— ì¶”ê°€

---

### 1.2 Docker ì—”ì§„ ì„¤ì¹˜ ë°©ë²•

#### 1.2.1 ì„¤ì¹˜ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì„¤ì¹˜
- ì‹¤í–‰ íŒŒì¼: `Docker Desktop Installer.exe`

#### 1.2.2 WSLì„ ì´ìš©í•œ ì„¤ì¹˜
1. **Ubuntu ì„¤ì¹˜**
   ```bash
   wsl --install -d Ubuntu
   ```

2. **Ubuntu ì‹¤í–‰ (í˜¸í™˜ì„± ë¬¸ì œ ë°œìƒ ì‹œ `winpty` ì‚¬ìš©)**
   ```bash
   wsl -d Ubuntu -u root
   winpty wsl -d Ubuntu -u root
   ```

   - í˜¸ìŠ¤íŠ¸ PCì˜ `hypervisorlaunchtype` ì„¤ì • í™•ì¸:
     ```bash
     bcdedit /enum | findstr /i hypervisorlaunchtype
     ```
     - ê²°ê³¼ê°€ `Auto` ê°€ ì•„ë‹ˆë¼ë©´ ìˆ˜ì •:
       ```bash
       bcdedit /set hypervisorlaunchtype auto
       ```
   - VirtualBoxë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `off` ë¡œ ì„¤ì •í•´ì•¼ í•¨:
     ```bash
     bcdedit /set hypervisorlaunchtype off
     ```

3. **Ubuntu ì—…ë°ì´íŠ¸ ë° Docker ì„¤ì¹˜**
   ```bash
   apt update
   apt install -y docker.io
   ```

4. **Docker ë°ëª¬ ì™¸ë¶€ì ‘ì† ì„¤ì •**
   ```bash
   vi /etc/docker/daemon.json
   ```
   ```json
   {
     "hosts": ["unix:///var/run/docker.sock", "tcp://0.0.0.0:2375"],
	 "dns": ["8.8.8.8", "8.8.4.4"]
   }
   ```

5. **Docker ë°ëª¬ ì‹¤í–‰**
   ```bash
   nohup dockerd -H tcp://localhost:2375 > /var/log/docker.log 2>&1 &
   ```
   ë˜ëŠ” `DOCKER_HOST` í™˜ê²½ë³€ìˆ˜ ì„¤ì • í›„:
   ```bash
   export DOCKER_HOST=tcp://localhost:2375
   nohup dockerd > /var/log/docker.log 2>&1 &
   ```

6. **Docker ë°ëª¬ ì¤‘ì§€**
   ```bash
   kill -9 <PID>
   ```

7. **WSL ê´€ë¦¬**
   ```bash
   wsl --list --verbose
   wsl --shutdown
   wsl --unregister <ë°°í¬ëª…>
   ```

---

#### 1.2.3 Portable `dockerd.exe` ì‚¬ìš©
1. **ì—”ì§„ ì‹œì‘ (ê´€ë¦¬ì ê¶Œí•œ í•„ìˆ˜)**
   ```bash
   nohup dockerd -H npipe:////./pipe/docker_engine > /C/DEV/CLOUD/Docker/log/docker.log 2>&1 &
   ```
   ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ì§€ì •:
   ```bash
   set DOCKER_HOST=npipe:////./pipe/docker_engine
   nohup dockerd > /C/DEV/CLOUD/Docker/log/docker.log 2>&1 &
   ```

2. **ì—”ì§„ ì¤‘ì§€**
   ```bash
   taskkill /PID <PID> /F
   del C:\ProgramData\docker\docker.pid
   ```
   
---

## 2. Docker í´ë¼ì´ì–¸íŠ¸ ê¸°ë³¸ ëª…ë ¹ì–´

### 2.1 ìœ ìš©í•œ Alias
```bash
alias crm='docker rm -f $(docker ps -aq)'
alias cip='docker inspect --format "{{.NetworkSettings.IPAddress}}"'
alias clog='docker logs -f'
alias cdos='find . -type f \( -name "*.sh" -o -name "*.sql" -o -name "*.yml" \) -exec dos2unix {} \;'
```

### 2.2 ì ‘ì† ë° ì»¨í…Œì´ë„ˆ í™•ì¸

#### ì›ê²© ì ‘ì†
```bash
docker context create myserver --docker "host=ssh://root@<IPì£¼ì†Œ>"
docker context use myserver
```

#### ë¡œì»¬ ì ‘ì† (WSL)
```bash
docker -H tcp://localhost:2375 ps -a
# ë˜ëŠ”
export DOCKER_HOST=tcp://localhost:2375
docker ps -a
```

#### ë¡œì»¬ ì ‘ì† (dockerd.exe)
```bash
docker -H npipe:////./pipe/docker_engine ps -a
# ë˜ëŠ”
set DOCKER_HOST=npipe:////./pipe/docker_engine
docker ps -a
```

---

## 3. ì´ë¯¸ì§€ ë° ì»¨í…Œì´ë„ˆ ê´€ë¦¬

### 3.1 ì´ë¯¸ì§€ ê²€ìƒ‰ ë° ë‹¤ìš´ë¡œë“œ
```bash
docker search tomcat
docker pull tomcat:10
docker pull tomcat:latest
```

### 3.2 ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
docker run -d --name tomcat10 -p 6080:8080 tomcat:10
docker run -d --name tomcat10 -p 6080:8080 -p 2222:22 tomcat:10
```

ì˜µì…˜ ì„¤ëª…:
- `-d`: ë°ëª¬ ëª¨ë“œ
- `--name`: ì»¨í…Œì´ë„ˆ ì´ë¦„
- `-p`: í¬íŠ¸ ë§¤í•‘
- ë§ˆì§€ë§‰ ì¸ì: ì´ë¯¸ì§€ ID ë˜ëŠ” ì´ë¦„

---

## 4. Dockerfile ì˜ˆì œ

### 4-1. Dockerfile ìƒ˜í”Œ(Spring Boot JAR)
```dockerfile
# 1. ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì„ íƒ
FROM eclipse-temurin:21-jdk
# 2. ì´ë¯¸ì§€ ì‘ì„±ì(ì„ íƒ)
LABEL maintainer="dev@company.com"
# 3. ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app
# 4. ë¹Œë“œ ê²°ê³¼ë¬¼(JAR) ë³µì‚¬
COPY target/sample-app.jar app.jar
# 5. ì»¨í…Œì´ë„ˆ ì™¸ë¶€ì— ë…¸ì¶œí•  í¬íŠ¸
EXPOSE 8080
# 6. ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ìˆ˜í–‰í•  ëª…ë ¹
ENTRYPOINT ["java", "-jar", "app.jar"]
```

### 4-2. Dockerfile ìƒ˜í”Œ ìƒì„¸ì„¤ëª…

##### ğŸ”¹ FROM
```dockerfile
FROM eclipse-temurin:21-jdk
```
- **ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì§€ì •**
- ëª¨ë“  Docker ì´ë¯¸ì§€ëŠ” ë°˜ë“œì‹œ FROMìœ¼ë¡œ ì‹œì‘
- `eclipse-temurin:21-jdk`
  - OpenJDK 21
  - Spring Boot 3.x, Java 21 í™˜ê²½ì— ì í•©
- âŒ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” `-jre` ë˜ëŠ” `-alpine` ê¸°ë°˜ì´ ë” ê°€ë²¼ì›€

##### ğŸ”¹ LABEL (ë˜ëŠ” MAINTAINER)
```dockerfile
LABEL maintainer="dev@company.com"
```
- ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°
- í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ **ê´€ë¦¬ ëª©ì **ìœ¼ë¡œ ë§¤ìš° ìœ ìš©

##### ğŸ”¹ WORKDIR
```dockerfile
WORKDIR /app
```
- ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ **ê¸°ë³¸ ì‘ì—… ë””ë ‰í† ë¦¬**
- ì´í›„ ëª…ë ¹(COPY, RUN, CMD ë“±)ì€ ëª¨ë‘ `/app` ê¸°ì¤€
- âŒ WORKDIR ì—†ì´ ìƒëŒ€ê²½ë¡œ ì‚¬ìš© â†’ ê°€ë…ì„±/ìœ ì§€ë³´ìˆ˜ ë‚˜ì¨

##### ğŸ”¹ COPY
```dockerfile
COPY target/sample-app.jar app.jar
```
- **í˜¸ìŠ¤íŠ¸ â†’ ì»¨í…Œì´ë„ˆ íŒŒì¼ ë³µì‚¬**
- í˜•ì‹:
```dockerfile
COPY <í˜¸ìŠ¤íŠ¸ê²½ë¡œ> <ì»¨í…Œì´ë„ˆê²½ë¡œ>
```
	| ëª…ë ¹ | ì°¨ì´ì  |
	|----|----|
	| COPY | ë‹¨ìˆœ ë³µì‚¬ (ê¶Œì¥) |
	| ADD | ì••ì¶• í•´ì œ, URL ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥ (ë¶ˆí•„ìš”í•˜ë©´ ì‚¬ìš© âŒ) |


##### ğŸ”¹ EXPOSE
```dockerfile
EXPOSE 8080
```
- ì»¨í…Œì´ë„ˆê°€ **ì‚¬ìš©í•  í¬íŠ¸ ë¬¸ì„œí™”**
- ì‹¤ì œ í¬íŠ¸ ì˜¤í”ˆì€ `docker run -p` ë˜ëŠ” `docker-compose.yml`ì—ì„œ ìˆ˜í–‰
- âŒ EXPOSEë§Œìœ¼ë¡œ í¬íŠ¸ê°€ ì—´ë¦¬ì§€ëŠ” ì•ŠìŒ

##### ğŸ”¹ ENTRYPOINT
```dockerfile
ENTRYPOINT ["java", "-jar", "app.jar"]
```
- ì»¨í…Œì´ë„ˆê°€ **ì‹¤í–‰ë  ë•Œ ë°˜ë“œì‹œ ìˆ˜í–‰ë˜ëŠ” ëª…ë ¹**
- JSON ë°°ì—´ í˜•ì‹ â†’ ê¶Œì¥ (ì‰˜ ë¬¸ì œ ë°©ì§€)
```
| ëª…ë ¹ | ìš©ë„ |
|----|----|
| ENTRYPOINT | ê³ ì • ì‹¤í–‰ ëª…ë ¹ |
| CMD | ê¸°ë³¸ ì¸ì(ë®ì–´ì“°ê¸° ê°€ëŠ¥) |
```

### 4-3. ENTRYPOINT + CMD ì¡°í•© ì˜ˆì œ (ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©)
```dockerfile
FROM eclipse-temurin:21-jdk
WORKDIR /app
COPY target/sample-app.jar app.jar

ENTRYPOINT ["java", "-jar", "app.jar"]
CMD ["--spring.profiles.active=dev"]
```

```bash
docker run sample-app
# â†’ java -jar app.jar --spring.profiles.active=dev

docker run sample-app --spring.profiles.active=prod
# â†’ CMD ê°’ë§Œ ë®ì–´ì”€
```

### 4-4. ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ (ê°€ì¥ ê¶Œì¥ â­)

```dockerfile
# ---------- Build Stage ----------
FROM eclipse-temurin:21-jdk AS builder
WORKDIR /build
COPY . .
RUN ./mvnw clean package -DskipTests

# ---------- Runtime Stage ----------
FROM eclipse-temurin:21-jre
WORKDIR /app
COPY --from=builder /build/target/sample-app.jar app.jar

EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

âœ”ï¸ ì¥ì 
```
- ì´ë¯¸ì§€ í¬ê¸° ëŒ€í­ ê°ì†Œ
- ë¹Œë“œ ë„êµ¬(Maven, Gradle) í¬í•¨ ì•ˆ ë¨
- ë³´ì•ˆ ë° ë°°í¬ íš¨ìœ¨ â†‘
```

---

## 5. ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```bash
docker build -t webserver:v1 .
docker build -t hellojs:latest .
docker run -d -p 8080:80 --name web webserver:v1
docker run -d -p 80:80 --name hellojs hellojs:latest
```

---

## 6. ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ëª…ë ¹ì–´
```bash
# ìƒíƒœí™•ì¸
docker ps -a
# ë¡œê·¸í™•ì¸
docker logs -f <ì»¨í…Œì´ë„ˆëª…>
# ìƒì„¸ì •ë³´
docker inspect <ì»¨í…Œì´ë„ˆëª…>
# IPí™•ì¸
docker inspect --format '{{.NetworkSettings.IPAddress}}' <ì»¨í…Œì´ë„ˆëª…>
# ì ‘ì†
docker exec -it <ì»¨í…Œì´ë„ˆëª…> /bin/bash
# ì¤‘ì§€
docker stop <ì»¨í…Œì´ë„ˆëª…>
# ì¬ì‹œì‘
docker start <ì»¨í…Œì´ë„ˆëª…>
# ì‚­ì œ
docker rm <ì»¨í…Œì´ë„ˆëª…>
# ì´ë¯¸ì§€ëª©ë¡
docker images
# ì´ë¯¸ì§€ì‚­ì œ
docker rmi <ì´ë¯¸ì§€ëª…>
# ë„¤íŠ¸ì›Œí¬ëª©ë¡
docker network ls
# ë„¤íŠ¸ì›Œí¬ì‚­ì œ
docker network rm <ë„¤íŠ¸ì›Œí¬ì´ë¦„>
```

---

## 7. Docker Hub ì—°ë™

```bash
docker login -u <ê³„ì •ëª…>
docker tag tomcat:10 <ê³„ì •ëª…>/tomcat:10
docker push <ê³„ì •ëª…>/tomcat:10
docker pull <ê³„ì •ëª…>/tomcat:10
```

---

## 8. ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

- **ë©”ëª¨ë¦¬ ì œí•œ**
  ```bash
  docker run -d --name hellojs -p 80:80 -m 512m hellojs:latest
  docker run -d --name hellojs -p 80:80 -m 512m --memory-reservation 256m hellojs:latest
  docker run -d --name hellojs -p 80:80 -m 512m --memory-swap 1024m hellojs:latest
  ```

- **CPU ì œí•œ**
  ```bash
  docker run -d --name hellojs -p 80:80 --cpus=".5" hellojs:latest
  docker run -d --name hellojs -p 80:80 --cpuset-cpus 0-3 hellojs:latest
  docker run -d --name hellojs -p 80:80 --cpu-shares 2048 hellojs:latest
  ```

- **ëª¨ë‹ˆí„°ë§**
  ```bash
  docker stats -a
  docker events -f container=hellojs
  ```
  ğŸ“¦ [Google cAdvisor](https://github.com/google/cadvisor)

---

## 9. ì»¨í…Œì´ë„ˆ Storage

- **ë°ì´í„° ì˜êµ¬ ì €ì¥**
  ```bash
  docker run -d --name mysql -p 33060:3306 -v /mysql_data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=db2admin mysql:latest
  ```

- **ì»¨í…Œì´ë„ˆê°„ ë°ì´í„° ê³µìœ **
  ```bash
  docker run -d -p 8080:80 --name web1 -v /web_data:/usr/share/nginx/html:rw webserver:v1
  docker run -d -p 8081:80 --name web2 -v /web_data:/usr/share/nginx/html:ro webserver:v1
  ```

- **ë³¼ë¥¨ ê´€ë¦¬**
  ```bash
  docker volume create mysql_data
  docker volume ls
  docker volume rm mysql_data
  ```
- **ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¡œ ì €ì¥**
  ```bash
  docker commit dstone-batch dstone-batch:latest
  docker tag dstone-batch:latest jysn007/dstone-batch:1.0.0
  docker login -u jysn007 -p 'db2admin!@'
  docker push jysn007/dstone-batch:1.0.0
  ```

---

## 10. ë„¤íŠ¸ì›Œí¬ ì„¤ì •

```bash
docker network create --driver bridge --subnet 192.168.100.0/24 --gateway 192.168.100.254 mynet
docker network ls
docker run -d --name appjs --net mynet --ip 192.168.100.100 -p 8080:8080 appjs:latest
```

### WordPress + MySQL ì˜ˆì œ
```bash
docker run -d --name mysql5.7 -p 33060:3306 -v /mysql_data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=db2admin mysql:5.7
docker run -d --name wordpress -p 7070:80 --link mysql5.7:mysql -e WORDPRESS_DB_PASSWORD=db2admin wordpress:4
```

---

## 11. Docker Compose ì˜ˆì œ

**ì„¤ì¹˜**
```bash
curl -SL https://github.com/docker/compose/releases/download/v2.40.0/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```

**YAML ì˜ˆì‹œ (wordpress-compose.yml)**

```yaml
version: "3.9"
services:
  mysql:
  
    # ---------- ìµœì´ˆì‘ì—…ì¼ ë•Œ ------------------------- #
    image: mysql:5.7
    # --------------------------------------------- #    
    # ---------- Docker Hub ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ ------------- #
    # image: jysn007/mysql:5.7
    # --------------------------------------------- #
	
    ###########################################################
    # <ì„œë¹„ìŠ¤ ë‚´ë¶€ Volumes (ë°”ì¸ë“œ ë§ˆìš´íŠ¸ vs ë³¼ë¥¨ ì°¸ì¡°)>
    # A.íƒ€ì… 1: ë°”ì¸ë“œ ë§ˆìš´íŠ¸ (Bind Mount)
    #   - í˜¸ìŠ¤íŠ¸ì˜ ì‹¤ì œ ê²½ë¡œë¥¼ ì»¨í…Œì´ë„ˆì— ì—°ê²°
    #   - ê²½ë¡œê°€ .ë¡œ ì‹œì‘í•˜ê±°ë‚˜ /ë¡œ ì‹œì‘ (ì ˆëŒ€ê²½ë¡œ)
    #   - íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì§ì ‘ ê³µìœ 
    #   - ìš©ë„: ì½”ë“œ, ì„¤ì • íŒŒì¼ ë“± ìì£¼ ìˆ˜ì •í•˜ëŠ” ê²ƒë“¤
    #   ì˜ˆ) - ./backend:/app
    # B.íƒ€ì… 2: ë„¤ì„ë“œ ë³¼ë¥¨ ì°¸ì¡° (Named Volume)
    #   - Dockerê°€ ê´€ë¦¬í•˜ëŠ” ë³¼ë¥¨ì„ ì»¨í…Œì´ë„ˆì— ì—°ê²°
    #   - ì´ë¦„ë§Œ ì ìŒ (ê²½ë¡œ ì—†ìŒ)
    #   - ì‹¤ì œ ì €ì¥ìœ„ì¹˜ëŠ” Dockerê°€ ê´€ë¦¬(ë³´í†µ í˜¸ìŠ¤íŠ¸ì˜ /var/lib/docker/volumes/<í”„ë¡œì íŠ¸ëª…>_<ë³¼ë¥¨ëª…>/_data)
    #   - ìµœí•˜ë‹¨ Volumes ì„ ì–¸(ë³¼ë¥¨ ì •ì˜)ì´ ë˜ì–´ìˆì–´ì•¼ í•¨.
    #   - ìš©ë„: ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ì²˜ëŸ¼ ì˜êµ¬ ë³´ì¡´ì´ í•„ìš”í•˜ì§€ë§Œ ì§ì ‘ ìˆ˜ì •í•  ì¼ì€ ì—†ëŠ” ê²ƒë“¤
    #   ì˜ˆ) - db-data:/var/lib/postgresql/data
    #      í˜¸ìŠ¤íŠ¸ìœ„ì¹˜ : /var/lib/docker/volumes/mysql_db-data/_data
    #      ì»¨í…Œì´ë„ˆìœ„ì¹˜ : /var/lib/postgresql/data
    ###########################################################
    volumes:
      - /mysql_data:/var/lib/mysql
    ports:
      - "33060:3306"
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: db2admin
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: wordpress

  wordpress:
    depends_on:
      - mysql
    image: wordpress:4
    volumes:
      - /wordpress_data:/var/www/html
    ports:
      - "7070:80"
    restart: always
    environment:
      WORDPRESS_DB_HOST: mysql5.7:3306
      WORDPRESS_DB_NAME: wordpress
      WORDPRESS_DB_USER: wordpress
      WORDPRESS_DB_PASSWORD: wordpress
	  
######################################
# Volumes ì„ ì–¸(ë³¼ë¥¨ ì •ì˜)
# - ë„¤ì„ë“œ ë³¼ë¥¨ ì°¸ì¡° (Named Volume)ì—ì„œ ì‚¬ìš©.
######################################
volumes:
  mysql_data: {}
  wordpress_data: {}
```

**ì‹¤í–‰**
```bash
docker-compose -f ./wordpress-compose.yml up -d
```

---

## 12. ì»¨í…Œì´ë„ˆë¥¼ ê°ê° ê°œë³„ë¡œ ë„ì› ì„ ê²½ìš° Network

 ë‘ compose íŒŒì¼ì„ ê°ê° docker-compose up í–ˆë‹¤ë©´ ë„¤íŠ¸ì›Œí¬ ì´ë¦„ì´ ê°™ì•„ë„ í”„ë¡œì íŠ¸ ì´ë¦„ì´ ë‹¤ë¥´ë©´ ë„¤íŠ¸ì›Œí¬ê°€ ë¶„ë¦¬ë  ìˆ˜ ìˆìŒ. ì´ ê²½ìš° ì•„ë˜ì™€ ê°™ì€ ì†”ë£¨ì…˜ì´ ìˆìŒ.

### 12.1. ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì§ì ‘ ìƒì„± í›„ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©

```bash
docker network create dstone-network
```
```yml(ë‘ yml ëª¨ë‘ ìˆ˜ì •)
networks:
  dstone-network:
    external: true
```

### 12.2. compose ì‹¤í–‰ ì‹œ í”„ë¡œì íŠ¸ëª… í†µì¼

```bash
docker compose -p dstone -f 01.dstone-mysql-docker.yml up -d
docker compose -p dstone -f 02.dstone-boot-docker.yml up -d
```
 ì´ ê²½ìš° ì‹¤ì œ ë„¤íŠ¸ì›Œí¬(<projectëª…>_dstone-network)
```bash
dstone_dstone-network
```

### 12.3. í•˜ë‚˜ì˜ docker-compose.ymlë¡œ í•©ì¹˜ê¸° (ì‹¤ë¬´ ìµœì„ )

```yml
services:
  dstone-mysql:
    ...
  dstone-boot:
    ...
networks:
  dstone-network:
    driver: bridge
```

---

## 13. dstone í”„ë ˆì„ì› ì‘ì—…

### 13-1. ì‹¤í–‰íŒŒì¼ ìƒì„±
 - /dstone-boot/target ì— jar ìƒì„±(Maven ë¹Œë“œ)
 - /dstone-batch/target ì— jar ìƒì„±(Maven ë¹Œë“œ)
 - /dstone-batch-server/target ì— jar ìƒì„±(bin/00.deploy.bat ì‹¤í–‰)

### 13-2. ë¡œì»¬ì— workspace ì‘ì—…êµ¬ì¡° ìƒì„±
 - /framework/docs/CLOUD/Docker/00.í”„ë ˆì„ì›(dstone)ì ìš©/dstone-docker-workshop.bat ì‹¤í–‰.
 - C:/Temp/workshop ì•„ë˜ì— í˜¸ìŠ¤íŠ¸ìš© íŒŒì¼ë“¤ ìƒì„±ëœ ê²ƒ í™•ì¸
 
### 13-3. ë¡œì»¬ workspace í˜¸ìŠ¤íŠ¸ë¡œ ë³µì‚¬
 - ìƒì„±ëœ C:/Temp/workshop/ ì•„ë˜ì˜ ëª¨ë“  ìì›ì„ í˜¸ìŠ¤íŠ¸ì˜ /workshop ì•„ë˜ë¡œ ë³µì‚¬.
 
### 13-4. dstone Docker workspace ì‘ì—…êµ¬ì¡°
```text
/workshop
  â””â”€ /dstone-boot                              # <Boot Application>
     â”œâ”€ conf/                                  #   ì„¤ì • íŒŒì¼
     â”œâ”€ target/                                #   ì‹¤í–‰ íŒŒì¼
     â”œâ”€ 01.dstone-boot-docker.yml              #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-boot-docker-reg.sh           #   Docker Hub ë“±ë¡ Shell
  â””â”€ /dstone-mysql                             # <Database (MySQL)>
     â”œâ”€ init-db/                               #   DB ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
     â”œâ”€ 01.dstone-mysql-docker.yml             #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-mysql-docker-reg.sh          #   Docker Hub ë“±ë¡ Shell
  â””â”€ /dstone-rabbitmq                          # <RabbitMQ>
     â”œâ”€ init-data/                             #   ì´ˆê¸° ë°ì´í„°
     â”œâ”€ 01.dstone-rabbitmq-docker.yml          #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-rabbitmq-docker-reg.sh       #   Docker Hub ë“±ë¡ Shell
  â””â”€ /workshop/dstone-redis                    # <Redis>
     â”œâ”€ 01.dstone-redis-docker.yml             #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-redis-docker-reg.sh          #   Docker Hub ë“±ë¡ Shell
  â””â”€ /dstone-batch                             # <Batch Application>
     â”œâ”€ conf/                                  #   ì„¤ì • íŒŒì¼
     â”œâ”€ target/                                #   ì‹¤í–‰ íŒŒì¼
     â”œâ”€ 01.dstone-batch-docker.yml             #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-batch-docker-reg.sh          #   Docker Hub ë“±ë¡ Shell
  â””â”€ /dstone-batch-server                      # <Batch Admin Application>
     â”œâ”€ conf/                                  #   ì„¤ì • íŒŒì¼
     â”œâ”€ target/                                #   ì‹¤í–‰ íŒŒì¼
     â”œâ”€ 01.dstone-batch-server-docker.yml      #   ê°œë³„ Docker Compose ë¹Œë“œíŒŒì¼
     â””â”€ 02.dstone-batch-server-docker-reg.sh   #   Docker Hub ë“±ë¡ Shell
  â””â”€ /workshop/dstone-boot-docker-compose.yml  # dstone-boot Docker Compose ë¹Œë“œíŒŒì¼
  â””â”€ /workshop/dstone-batch-docker-compose.yml # dstone-batch Docker Compose ë¹Œë“œíŒŒì¼
  â””â”€ /workshop/dstone-docker-compose.yml       # ì „ì²´ Docker Compose ë¹Œë“œíŒŒì¼
```

### 13.5 ì‚¬ìš©ì ë³€ê²½, íŒŒì¼ê¶Œí•œ ë³€ê²½
```bash
chown -R root:root *
chmod -R 777 *
cdos 
```
- í•˜ìœ„ë””ë ‰í† ë¦¬ê¹Œì§€ dos2unix ì ìš© ëª…ë ¹ ì•Œë¦¬ì•„ìŠ¤
- alias cdos='find . -type f \( -name "*.sh" -o -name "*.sql" -o -name "*.yml" \) -exec dos2unix {} \;')


### 13-6. dstone í”„ë ˆì„ì› ì„¤ì¹˜ ë° ì‚­ì œ
```bash
# Docker Compose ì‹¤í–‰
docker-compose -p dstone -f /workshop/dstone-docker-compose.yml up -d
# ë¡œê·¸ í™•ì¸
docker-compose -p dstone -f /workshop/dstone-docker-compose.yml logs -f
# ì¤‘ì§€ ë° ì‚­ì œ
docker-compose -p dstone -f /workshop/dstone-docker-compose.yml down -v
```

### 13-7. dstone í”„ë ˆì„ì› Docker Hub ë“±ë¡
```bash
/workshop/dstone-mysql/02.dstone-mysql-docker-reg.sh
/workshop/dstone-redis/02.dstone-redis-docker-reg.sh
/workshop/dstone-rabbitmq/02.dstone-rabbitmq-docker-reg.sh
/workshop/dstone-boot/02.dstone-boot-docker-reg.sh
/workshop/dstone-batch/02.dstone-batch-docker-reg.sh
/workshop/dstone-batch-server/02.dstone-batch-server-docker-reg.sh
```

### 13-8. ê°œë³„ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
```bash
docker stop dstone-batch
docker stop dstone-batch-server
docker stop dstone-boot
docker stop dstone-mysql
docker stop dstone-redis
docker stop dstone-rabbitmq
```

### 13-9. ê°œë³„ ì»¨í…Œì´ë„ˆ ì‹œì‘
```bash
docker start dstone-rabbitmq
docker start dstone-mysql
docker start dstone-redis
docker start dstone-boot
docker start dstone-batch
docker start dstone-batch-server
```

---

ğŸ“˜ **ì •ë¦¬ ì™„ë£Œ (2025 ë²„ì „)**  
ì´ ë¬¸ì„œëŠ” Windows, WSL, ë˜ëŠ” Portable Docker í™˜ê²½ ëª¨ë‘ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ í‘œì¤€í™”ëœ Docker ìš´ì˜ ë§¤ë‰´ì–¼ì…ë‹ˆë‹¤.
